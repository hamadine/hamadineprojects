<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Dictionnaire Tadaksahak â€“ DÃ©but d'une aventure culturelle</title>
  <meta name="description" content="DÃ©but d'une aventure riche autour de la langue et culture Idaksahak." />
  <meta name="theme-color" content="#005fa3" />
  <base href="/Tadaksahak-Learning-/">
  <link rel="manifest" href="manifest.webmanifest">
  <link rel="icon" href="images/idaksahak_square.png" type="image/png" />
  <link rel="stylesheet" href="style.css" />
  <script type="module" src="app.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/fuse.js@6.6.2"></script>
  <style>
    .hero {
      text-align: center;
      padding: 4rem 1rem;
      background: #f2f2f2;
    }
    .hero h1 {
      font-size: 2.5rem;
      margin-bottom: 1rem;
    }
    .hero p {
      font-size: 1.2rem;
      color: #444;
    }
    .hero img {
      max-width: 200px;
      margin: 2rem auto;
    }
    .hero .btn {
      margin-top: 1rem;
      padding: 0.75rem 1.5rem;
      font-size: 1rem;
      background: #005fa3;
      color: white;
      border: none;
      border-radius: 5px;
      text-decoration: none;
      display: inline-block;
    }
  </style>
</head>

<body>
  <noscript>
    <div class="js-warning" role="alert">
      âš ï¸ Ce site nÃ©cessite JavaScript pour fonctionner correctement.
    </div>
  </noscript>

  <header class="site-header">
    <img src="images/idaksahak_round.png" alt="Logo Tadaksahak" class="logo-header" loading="lazy" />
  </header>

  <!-- âœ… Section Accueil Ã©lÃ©gante -->
  <section class="hero" id="accueil">
    <h1>Bienvenue sur Tadaksahak</h1>
    <p>Un espace vivant pour dÃ©couvrir la langue et la culture Idaksahak.</p>
    <img src="images/idaksahak_round.png" alt="Logo Accueil" />
    <br>
    <a href="#dictionnaire" class="btn">AccÃ©der au dictionnaire ğŸ“–</a>
  </section>

  <!-- âœ… Navigation principale -->
  <nav class="tabs" aria-label="Navigation principale">
    <button class="tab-btn" data-tab="accueil" onclick="location.href='#accueil'">ğŸ  Accueil</button>
    <button class="tab-btn active" data-tab="dictionnaire" id="tab-dictionnaire">ğŸ“– Dictionnaire</button>
    <button class="tab-btn" data-tab="chat" id="tab-chat">ğŸ’¬ Chat</button>
    <button class="tab-btn" onclick="window.location.href='cours-anglais.html'">ğŸ“˜ Cours d'Anglais</button>
    <button class="tab-btn" data-tab="audio" id="tab-audio">ğŸ§ Audio</button>
    <button class="tab-btn" data-tab="photos" id="tab-photos">ğŸ–¼ï¸ Photos</button>
    <button class="tab-btn" data-tab="videos" id="tab-videos">ğŸ¥ VidÃ©os</button>
    <button class="tab-btn" data-tab="rapports" id="tab-rapports">ğŸ“„ Rapports</button>
    <button class="tab-btn" data-tab="actualites" id="tab-actualites">ğŸ“° ActualitÃ©s</button>
    <button class="tab-btn" data-tab="livres" id="tab-livres">ğŸ“š Livres</button>
  </nav>

  <main>
    <!-- ğŸ“– Section Dictionnaire -->
    <section id="dictionnaire" class="onglet-contenu" role="tabpanel" aria-labelledby="tab-dictionnaire">
      <h2>ğŸ“– Dictionnaire Tadaksahak</h2>
      <div class="search-bar">
        <input type="text" id="searchBar" placeholder="Recherchez un motâ€¦" aria-label="Recherche dans le dictionnaire" autocomplete="off">
      </div>

      <div class="mot-resultat">
        <h3 id="motTexte">â€”</h3>
        <p id="definition">â€”</p>
        <p id="compteur">0 / 0</p>
      </div>

      <div class="button-group dictionnaire-audio">
        <button id="btnPlay" class="btn-icon" aria-label="Ã‰couter le mot">ğŸ”Š Ã‰couter</button>
        <button id="btnPrononcer" class="btn-icon" aria-label="Prononcer le mot">ğŸ¤ Disâ€‘le</button>
        <button id="btnReplay" class="btn-icon" disabled aria-label="RÃ©Ã©couter">ğŸ” RÃ©Ã©couter</button>
        <button id="btnAuto" class="btn-icon" disabled aria-label="Lecture auto">â–¶ï¸ Lecture auto</button>
      </div>

      <div class="button-group dictionnaire-navigation">
        <button id="btnPrev" class="btn-nav" aria-label="Mot prÃ©cÃ©dent">âŸ¸</button>
        <button id="btnNext" class="btn-nav" aria-label="Mot suivant">â¡ï¸</button>
      </div>
    </section>
    <!-- ğŸ’¬ Section Chat -->
    <section id="chat" class="onglet-contenu" role="tabpanel" aria-labelledby="tab-chat" hidden>
      <h2 id="chat-title" data-i18n="chatTitre">ğŸ’¬ Chat Tadaksahak</h2>
      <div id="chatWindow" class="chatbox" role="log" aria-live="polite"></div>
      <div id="botIntro" class="chat-intro" data-i18n="botIntro">ğŸ¤– Salut, je suis Hamadine.</div>
      <div class="chat-input-container">
        <input type="text" id="chatInput" placeholder="Ã‰crivez votre messageâ€¦" aria-label="EntrÃ©e du chat" autocomplete="off">
        <button id="btnEnvoyer" aria-label="Envoyer le message" data-i18n="envoyer">Envoyer</button>
      </div>
    </section>

    <!-- ğŸ§ Section Audio -->
    <section id="audio" class="onglet-contenu" role="tabpanel" aria-labelledby="tab-audio" hidden>
      <h2>ğŸ§ Audios de traduction</h2>
      <p>Des enregistrements Tadaksahak issus de livres ou discours seront bientÃ´t disponibles.</p>

      <div style="text-align:center; margin-top: 2em;">
        <h3>ğŸ§ Lecture audio introductive</h3>
        <audio controls style="width:90%; max-width:600px;">
          <source src="audios/intro-idaksahak.mp3" type="audio/mpeg">
          Votre navigateur ne supporte pas l'audio.
        </audio>
      </div>
    </section>

    <!-- ğŸ–¼ï¸ Section Photos -->
    <section id="photos" class="onglet-contenu" role="tabpanel" aria-labelledby="tab-photos" hidden>
      <h2>ğŸ–¼ï¸ Galerie photographique</h2>
      <p>MÃ©moires en images des Ã©vÃ©nements historiques Idaksahak.</p>
      <!-- Tu pourras ajouter une grille dâ€™images ici -->
    </section>
    <!-- ğŸ¥ Section VidÃ©os -->
    <section id="videos" class="onglet-contenu" role="tabpanel" aria-labelledby="tab-videos" hidden>
      <h2>ğŸ¥ Archives vidÃ©o des Idaksahak</h2>
      <p>Regardez des tÃ©moignages, discours et scÃ¨nes historiques authentiques.</p>

      <div>
        <label for="filtreVideos">ğŸ—‚ï¸ Trier par :</label>
        <select id="filtreVideos">
          <option value="nouveau">ğŸ“… Plus rÃ©centes d'abord</option>
          <option value="ancien">ğŸ•°ï¸ Plus anciennes d'abord</option>
        </select>
      </div>

      <div id="videosContainer" class="videos-grid">
        <div class="video-container" data-date="2025-03-01">
          <h3>ğŸ§­ Secours aux migrants abandonnÃ©s</h3>
          <p>Des jeunes Idaksahak portent secours Ã  des migrants dans le dÃ©sert.</p>
          <video controls width="100%">
            <source src="videos/secours-migrants-idaksahak.mp4" type="video/mp4" />
          </video>
        </div>

        <div class="video-container" data-date="2024-12-10">
          <h3>ğŸ“– Cheikh Almomine Ag Mohamad</h3>
          <p>Portrait dâ€™un Ã©rudit respectÃ© des Idaksahak.</p>
          <video controls width="100%">
            <source src="videos/cheikh-almomine-idaksahak.mp4" type="video/mp4" />
          </video>
        </div>

        <div class="video-container" data-date="2023-07-21">
          <h3>ğŸ•Šï¸ DDR et engagement du MSA</h3>
          <p>Processus de DÃ©sarmement et RÃ©insertion des combattants MSA.</p>
          <video controls width="100%">
            <source src="videos/msa-ddr-combattants.mp4" type="video/mp4" />
          </video>
        </div>

        <div class="video-container" data-date="2023-03-05">
          <h3>ğŸ™ï¸ Discours de Moussa Ag Acharatoumane</h3>
          <p>Discours sur la paix, la sÃ©curitÃ© et la communautÃ© Idaksahak.</p>
          <video controls width="100%">
            <source src="videos/discours-historique-de-moussa-ag-acaharatoumane.mp4" type="video/mp4" />
          </video>
        </div>

        <div class="video-container" data-date="2022-09-15">
          <h3>ğŸ”¥ PÃ¢turages brÃ»lÃ©s par les terroristes</h3>
          <p>Destruction de zones pastorales â€” atteinte grave Ã  lâ€™environnement.</p>
          <video controls width="100%">
            <source src="videos/paturages-incendie-par-les-terroriste.mp4" type="video/mp4" />
          </video>
        </div>

        <div class="video-container" data-date="2022-05-02">
          <h3>ğŸ“– Jeune prodige du Coran</h3>
          <p>Portrait dâ€™un enfant rÃ©fugiÃ© rÃ©citant le Coran avec talent.</p>
          <video controls width="100%">
            <source src="videos/prodige-du-coran-des-idaksahak-refugies-en-algerie.mp4" type="video/mp4" />
          </video>
        </div>

        <div class="video-container" data-date="2021-11-28">
          <h3>ğŸ“¢ DÃ©menti de rumeur et appel Ã  la retenue</h3>
          <p>Un Adaksahak appelle Ã  la paix et au discernement intercommunautaire.</p>
          <video controls width="100%">
            <source src="videos/dementi-rumeur-haoussa-tue-par-les-idaksahak-et-appel-a-la-retenue.mp4" type="video/mp4" />
          </video>
        </div>
      </div>
    </section>

    <!-- Script de tri vidÃ©o -->
    <script>
      document.getElementById('filtreVideos').addEventListener('change', e => {
        const ordre = e.target.value;
        const conteneur = document.getElementById('videosContainer');
        const vidÃ©os = Array.from(conteneur.children);

        vidÃ©os.sort((a, b) => {
          const dateA = new Date(a.dataset.date);
          const dateB = new Date(b.dataset.date);
          return ordre === 'ancien' ? dateA - dateB : dateB - dateA;
        });

        vidÃ©os.forEach(vid => conteneur.appendChild(vid));
      });
    </script>
    <!-- ğŸ“„ Section Rapports -->
    <section id="rapports" class="onglet-contenu" role="tabpanel" aria-labelledby="tab-rapports" hidden>
      <h2>ğŸ“„ Rapports et Ã‰tudes</h2>
      <p>Documents officiels et Ã©tudes issues d'organisations internationales et locales.</p>

      <div>
        <label for="filtreRapports">ğŸ—‚ï¸ Trier par :</label>
        <select id="filtreRapports">
          <option value="nouveau">ğŸ“… Plus rÃ©cents d'abord</option>
          <option value="ancien">ğŸ•°ï¸ Plus anciens d'abord</option>
        </select>
      </div>

      <div id="rapportsContainer">
        <!-- Rapports ONU -->
        <section class="rapport-bloc" data-date="2022-03-01">
          <h3>ğŸ›¡ï¸ ONU & Organisations internationales</h3>
          <a href="rapports_idaksahak.html" target="_blank">ğŸ“„ Rapport ONU sur les Idaksahak (Mars 2022)</a>
        </section>

        <!-- Rapports complÃ©mentaires -->
        <section class="rapport-bloc" data-date="2021-11-20">
          <h3>ğŸ“ Rapports complÃ©mentaires</h3>
          <a href="rapports_complementaires.html" target="_blank">ğŸ“ Ã‰tudes additionnelles sur les Idaksahak</a>
        </section>
      </div>
    </section>

    <!-- Script de tri rapport -->
    <script>
      document.getElementById('filtreRapports').addEventListener('change', e => {
        const ordre = e.target.value;
        const container = document.getElementById('rapportsContainer');
        const blocs = Array.from(container.children);

        blocs.sort((a, b) => {
          const dateA = new Date(a.dataset.date);
          const dateB = new Date(b.dataset.date);
          return ordre === 'ancien' ? dateA - dateB : dateB - dateA;
        });

        blocs.forEach(bloc => container.appendChild(bloc));
      });
    </script>
    <!-- ğŸ“š Section Livres -->
    <section id="livres" class="onglet-contenu" role="tabpanel" aria-labelledby="tab-livres" hidden>
      <h2>ğŸ“š BibliothÃ¨que Idaksahak</h2>
      <p>Collection de livres, dâ€™Ã©tudes linguistiques et historiques sur la communautÃ© Idaksahak.</p>

      <div>
        <label for="rechercheLivres">ğŸ” Rechercher un livre :</label>
        <input type="text" id="rechercheLivres" placeholder="Tapez un mot-clÃ©â€¦" />
      </div>

      <div>
        <label for="selectThemeLivres">ğŸ¨ ThÃ¨me :</label>
        <select id="selectThemeLivres">
          <option value="clair">Clair</option>
          <option value="vert">Vert</option>
          <option value="sombre">Sombre</option>
        </select>
      </div>

      <!-- ğŸ“˜ Ã‰tudes linguistiques -->
      <section>
        <h3>ğŸ“˜ Ã‰tudes sur la langue Tadaksahak</h3>
        <div class="grid" style="margin-bottom: 2rem;">
          <div class="livre-bloc">
            <h4>ğŸ“˜ A Grammar of Tadaksahak</h4>
            <a href="https://archive.org/details/369-tadaksahak" class="btn" target="_blank">Ouvrir le PDF</a>
          </div>
          <div class="livre-bloc">
            <h4>ğŸ“œ TarÄ«kh al-SÅ«dÄn</h4>
            <iframe src="https://archive.org/embed/john-o.-hunwick-timbuktu-and-the-songhay-empire-al-sa-dis-ta-rikh-al-sudan-down-" width="100%" height="250" frameborder="0" allowfullscreen></iframe>
            <p>Traduction annotÃ©e du TarÄ«kh al-SÅ«dÄn, chronique sur Tombouctou.</p>
          </div>
          <div class="livre-bloc">
            <h4>ğŸ“œ TarÄ«kh al-FettÄsh (arabe)</h4>
            <iframe src="https://archive.org/embed/32882019289852-tarikhalfatashf" width="100%" height="250" frameborder="0" allowfullscreen></iframe>
          </div>
          <div class="livre-bloc">
            <h4>ğŸ“œ TarÄ«kh al-FettÄsh (anglais)</h4>
            <iframe src="https://archive.org/embed/timbuktu-chronicles-1" width="100%" height="250" frameborder="0" allowfullscreen></iframe>
          </div>
        </div>
      </section>

      <!-- ğŸ“— Ã‰tudes tribales -->
      <section>
        <h3>ğŸ“— Ã‰tudes sur la tribu des Idaksahak</h3>
        <div class="grid">
          <div class="livre-bloc">
            <h4>ğŸ“˜ Lâ€™Ã©mancipation politique des Idaksahak</h4>
            <a href="histoire-emancipation-integrale.html" class="btn">Lire ce livre</a>
          </div>
          <div class="livre-bloc">
            <h4>ğŸ“˜ ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ­Ø±Ø± Ø§Ù„ÙƒØ§Ù…Ù„ (arabe)</h4>
            <a href="ØªØ§Ø±ÙŠØ®-Ø§Ù„ØªØ­Ø±Ø±-Ø§Ù„ÙƒØ§Ù…Ù„-Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©.html" class="btn">Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„ÙƒØªØ§Ø¨</a>
          </div>
          <div class="livre-bloc">
            <h4>ğŸ“— Contribution Ã  la connaissance des Idaksahak</h4>
            <a href="Contribution Ã  la connaissance de la communautÃ© Idaksahak par le GÃ©ologue Ahmedâ€‘Mohamed AG GUIDI - Texte IntÃ©gral.html" class="btn">Lire ce livre</a>
          </div>
          <div class="livre-bloc">
            <h4>ğŸ“— Ù…Ø³Ø§Ù‡Ù…Ø© ÙÙŠ Ù…Ø¹Ø±ÙØ© Ù…Ø¬ØªÙ…Ø¹ Ø§Ù„Ø¥Ø¯Ø§ÙƒØ³Ø§Ù‡Ùƒ</h4>
            <a href="Ù…Ø³Ø§Ù‡Ù…Ø©-ÙÙŠ-Ù…Ø¹Ø±ÙØ©-Ù…Ø¬ØªÙ…Ø¹-Ø§Ù„Ø¥Ø¯Ø§ÙƒØ³Ø§Ù‡Ùƒ.html" class="btn">Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„ÙƒØªØ§Ø¨</a>
          </div>
          <div class="livre-bloc">
            <h4>ğŸ“— Contribution to the Knowledge of the Idaksahak Community</h4>
            <a href="contribution-to-the-knowledge-of-the-idaksahak-community.html" class="btn">Read this book</a>
          </div>
          <div class="livre-bloc">
            <h4>ğŸŒ The Serpent and the Crescent (Touareg)</h4>
            <a href="https://archive.org/details/in.ernet.dli.2015.129455" class="btn" target="_blank">Lire le PDF</a>
          </div>
          <div class="livre-bloc">
            <h4>ğŸŒ Medieval Africa, 1250â€“1800</h4>
            <a href="https://archive.org/details/MedievalAfrica12501800" class="btn" target="_blank">Lire le PDF</a>
          </div>
        </div>
      </section>
    </section>

    <!-- Scripts Livres -->
    <script>
      document.getElementById('rechercheLivres').addEventListener('input', e => {
        const filtre = e.target.value.toLowerCase();
        document.querySelectorAll('#livres .livre-bloc').forEach(bloc => {
          bloc.style.display = bloc.textContent.toLowerCase().includes(filtre) ? 'block' : 'none';
        });
      });

      document.getElementById('selectThemeLivres').addEventListener('change', e => {
        const theme = e.target.value;
        const sec = document.getElementById('livres');
        sec.classList.remove('theme-clair','theme-vert','theme-sombre');
        sec.classList.add('theme-' + theme);
      });
    </script>

    <style>
      #livres.theme-clair { background: var(--vert); }
      #livres.theme-vert { background: var(--gris); }
      #livres.theme-sombre { background: #333; color: #eee; }
      #livres.theme-sombre .livre-bloc { background: #444; color: #eee; }
      .grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 1.5rem;
      }
      .livre-bloc {
        background: #f9f9f9;
        padding: 1rem;
        border-radius: 8px;
        box-shadow: 0 2px 6px rgba(0,0,0,0.05);
      }
    </style>
    </main>

  <!-- BanniÃ¨re d'installation PWA -->
  <script>
    let deferredPrompt;
    function showInstallBanner() {
      if (!deferredPrompt) return;
      const banner = document.createElement('div');
      banner.innerHTML = `
        <div style="position:fixed; bottom:0; left:0; right:0; background:#005fa3; color:white; padding:1em; text-align:center; z-index:9999;">
          ğŸ“² Installez cette application pour un accÃ¨s hors ligne et rapide !
          <button id="installBtn" style="margin-left:1em; padding:0.5em 1em; background:white; color:#005fa3; border:none; border-radius:5px; font-weight:bold;">Installer</button>
          <span onclick="this.parentNode.remove()" style="margin-left:1em; cursor:pointer;">âŒ</span>
        </div>`;
      document.body.appendChild(banner);
      document.getElementById('installBtn').addEventListener('click', () => {
        banner.remove();
        deferredPrompt.prompt();
        deferredPrompt.userChoice.then(choice => {
          if (choice.outcome === 'accepted') {
            console.log("âœ… Installation acceptÃ©e");
          } else {
            console.log("âŒ Installation refusÃ©e");
          }
          deferredPrompt = null;
        });
      });
    }

    window.addEventListener('beforeinstallprompt', (e) => {
      e.preventDefault();
      deferredPrompt = e;
      showInstallBanner();
    });

    setInterval(() => {
      if (deferredPrompt) {
        showInstallBanner();
      }
    }, 30000); // relancer toutes les 30 secondes
  </script>

  <!-- Service Worker -->
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('/sw.js').then(registration => {
        console.log("âœ… Service Worker actif");
        registration.onupdatefound = () => {
          const newWorker = registration.installing;
          newWorker.onstatechange = () => {
            if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
              window.location.reload();
            }
          };
        };
      }).catch(err => console.error("âŒ Erreur SW :", err));
      
      navigator.serviceWorker.addEventListener('controllerchange', () => {
        window.location.reload();
      });
    }
  </script>
  
 <button id="toggleChatBot" class="floating-chat-btn" aria-label="Ouvrir le chat">ğŸ’¬</button>
<script>
  document.getElementById('toggleChatBot').addEventListener('click', () => {
    const chat = document.getElementById('chat');
    const allSections = document.querySelectorAll('.onglet-contenu');
    allSections.forEach(sec => sec.hidden = true);
    chat.hidden = false;
    document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
    document.getElementById('tab-chat').classList.add('active');
  });
</script>
</body>
</html>
